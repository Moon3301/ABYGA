<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>historialTransacciones</ion-title>

    <ion-buttons slot="start">
      <ion-button (click)="GoHome()"><ion-icon name="arrow-back-outline"></ion-icon></ion-button>
    </ion-buttons>
    
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  
  <div *ngFor="let fecha of crud.getFechasAgrupadas()">
  
    <ion-item style="border-radius: 15px; font-size: 10px; height: 25px; display: flex; flex-direction: column; align-items: flex-start;">
      <ion-label slot="start" style="margin-top: 4px;">{{ fecha }}</ion-label>
     <!-- <ion-label slot="end" style="margin-top: 4px;">MONTO ${{ crud.calcularMontoTotal(crud.transaccionesAgrupadas[fecha], 'Ingresos') | currency:'USD':'symbol':'1.2-2' }}
        / ${{ crud.calcularMontoTotal(crud.transaccionesAgrupadas[fecha], 'Gastos') | currency:'USD':'symbol':'1.2-2' }}</ion-label> -->
        <ion-label slot="end" style="margin-top: 4px;">MONTO: {{crud.totalNetoPorFecha[fecha] | currency:'USD':'symbol':'1.2-2'}}</ion-label>
    </ion-item>

    <div *ngFor="let transaccion of crud.transaccionesAgrupadas[fecha]">
      <div *ngFor="let categoria of transaccion.categoria">
        <div *ngFor="let subCategoria of categoria.subCategoria">
          <p></p>
          <ion-card #button [routerLink]="['/',transaccion.tipo_transaccion]" (click)="GetTransaccion(transaccion.id)">
            <ion-item >
              <fa-icon [icon]="subCategoria.icon" class="fa-xl" slot="start" ></fa-icon>
              <ion-list>
                <ion-label style="font-size: 12px;">{{categoria.nombre}}</ion-label>
                <ion-label style="font-size: 10px;">{{subCategoria.nombre}}</ion-label>
              </ion-list>

              <ion-list slot="end">
                <div *ngIf="transaccion.tipo_transaccion == 'Egresos'">
                  <ion-label style="font-size: 12px;" color="danger" >$-{{transaccion.monto}}</ion-label>
                </div>
                <div *ngIf="transaccion.tipo_transaccion == 'Ingresos'">
                  <ion-label style="font-size: 12px;" color="success" >${{transaccion.monto}}</ion-label>
                </div>
                
                <ion-label style="font-size: 10px;">Billetera | -5666666</ion-label>
              </ion-list>

            </ion-item>
          </ion-card>

        </div>
      </div>

    </div>
  </div>



</ion-content>
